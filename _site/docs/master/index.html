<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>dtreemap/TreeMap</title>

	<!-- Bootstrap core CSS -->
	<link href="/dtreemap/css/bootstrap.min.css" rel="stylesheet">
	<!-- Bootstrap theme -->
	<link href="/dtreemap/css/bootstrap-theme.min.css" rel="stylesheet">
	<!-- syntax highlight -->
	<link href="/dtreemap/css/syntax.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="/dtreemap/css/site.css" rel="stylesheet">

	<link href="/dtreemap/css/default.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body role="document">
<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/dtreemap/index.html"><img src="/dtreemap/ibmjs.png" id="avatar"></a>
		</div>
		<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<!--<li id="getting-started"><a href="/dtreemap/getting-started.html">Getting Started</a></li>-->
				<li id="docs"><a href="/dtreemap/docs/master/index.html">Docs</a></li>
				<!--<li><a href="#Showcase">Demos</a></li>-->
				<!--<li id="community"><a href="/dtreemap/community.html">Community</a></li>-->
				<li id="blog"><a href="/dtreemap/../blog/index.html">Blog</a></li>
				<li><a href="/dtreemap/../index.html">More Projects</a></li>
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</div>
<div class="container" role="main">
	<div class="doc">
	<h1>dtreemap/TreeMap</h1>

<p><code>dtreemap/TreeMap</code> displays data as a set of colored, potentially nested, rectangular cells. Treemaps can be used to explore large data sets by using convenient drill-down capabilities. They reveal data patterns and trends easily. Treemaps rely on data clustering, using areas and color information to represent the data you want to explore.</p>

<p>An example of a treemap is shown below. The treemap shows business sectors at the head of the hierarchy and provides the possibility to drill down to country and then company level.</p>

<p><img src="treemap.png" alt="xx"></p>

<p><code>dtreemap/TreeMap</code> supports squarified algorithms for two-dimensional treemaps, and is characterized by the ability to:</p>

<ul>
<li>Map the size, color, and label of treemap cells to properties in a data store.</li>
<li>Choose either a predefined algorithm for computing the item colors or specify a color using a customizable color function.</li>
<li>Specify the treemap levels at which labels are to appear.</li>
<li>Get an event when clicking and hovering over treemap items.</li>
<li>Navigate within a treemap with visual effects on drill down.</li>
</ul>

<p>Before proceeding checkout <a href="setup.html">setup page</a> on how to setup a project using dtreemap. This will be required to leverage the samples from this page.</p>

<h5>Table of Contents</h5>

<p><a href="#instantiation">Element Instantiation</a><br>
<a href="#configuration">Element Configuration</a><br>
<a href="#styling">Element Styling</a><br>
<a href="#interactions">User Interactions</a><br>
<a href="#mixins">Mixins</a><br>
<a href="#events">Element Events</a><br>
<a href="#enterprise">Enteprise Use</a>  </p>

<p><a name="instantiation"></a></p>

<h2>Element Instantiation</h2>

<p>See <a href="/delite/docs/master/Widget.html"><code>delite/Widget</code></a> for full details on how instantiation lifecycle is working.</p>

<h3>Declarative Instantiation</h3>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">dataStore</span><span class="p">;</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;delite/register&quot;</span><span class="p">,</span> <span class="s2">&quot;dtreemap/TreeMap&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">register</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">dataStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">idProperty</span><span class="o">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span>
    <span class="p">[</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;France&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Germany&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">450</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">48</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;UK&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">700</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;USA&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">250</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Brazil&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">450</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;China&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;Asia&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Japan&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">900</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;Asia&quot;</span> <span class="p">}</span>
  <span class="p">]});</span>
  <span class="nx">register</span><span class="p">.</span><span class="nx">parse</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;d-treemap</span> <span class="na">style=</span><span class="s">&quot;width:640px;height:640px&quot;</span> <span class="na">store=</span><span class="s">&quot;dataStore&quot;</span> <span class="na">areaAttr=</span><span class="s">&quot;sales&quot;</span> 
    <span class="na">colorAttr=</span><span class="s">&quot;profit&quot;</span> <span class="na">tooltipAttr=</span><span class="s">&quot;label&quot;</span> <span class="na">groupAttrs=</span><span class="s">&quot;region&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/d-treemap&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<h3>Programmatic Instantiation</h3>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/store/Memory&quot;</span><span class="p">,</span> <span class="s2">&quot;dtreemap/TreeMap&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Memory</span><span class="p">,</span> <span class="nx">TreeMap</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dataStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">idProperty</span><span class="o">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span>
    <span class="p">[</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;France&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Germany&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">450</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">48</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;UK&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">700</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;USA&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">250</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Brazil&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">450</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;America&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;China&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;Asia&quot;</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Japan&quot;</span><span class="p">,</span> <span class="nx">sales</span><span class="o">:</span> <span class="mi">900</span><span class="p">,</span> <span class="nx">profit</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;Asia&quot;</span> <span class="p">}</span>
  <span class="p">]});</span>
  <span class="kd">var</span> <span class="nx">treeMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TreeMap</span><span class="p">({</span><span class="nx">store</span><span class="o">:</span> <span class="nx">dataStore</span><span class="p">,</span> <span class="nx">areaAttr</span><span class="o">:</span> <span class="s2">&quot;sales&quot;</span><span class="p">,</span> <span class="nx">colorAttr</span><span class="o">:</span> <span class="s2">&quot;profit&quot;</span><span class="p">,</span> <span class="nx">groupAttrs</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]});</span>
  <span class="nx">treeMap</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">&quot;640px&quot;</span><span class="p">;</span>
  <span class="nx">treeMap</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">&quot;480px&quot;</span><span class="p">;</span>
  <span class="nx">treeMap</span><span class="p">.</span><span class="nx">placeAt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
  <span class="nx">treeMap</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="configuration"></a></p>

<h2>Element Configuration</h2>

<h3>Data</h3>

<p><code>dtreemap/TreeMap</code> can connect to any implementation of <code>dojo/store/api/Store</code> interface that implements the get, query and getIdentity methods. It supports flat data and optionally creates a hierarchy from this data using <code>groupAttrs</code>property to group the data based on certain of their attributes.</p>

<p>A set of properties are available on the treemap to map the properties from the store to the treemap properties. see <code>delite/StoreMap</code>for details on mapping.</p>

<h4>Mapping using attributes</h4>

<p>In this example the data are mapped from the data store using an attribute based mapping. That means the cell size and color as well as the grouping are extracted from attributes value in the data.</p>

<iframe width="100%" height="300" src="http://jsfiddle.net/ibmjs/jnh79/embedded/" allowfullscreen="allowfullscreen" frameborder="0"><a href="http://jsfiddle.net/cjolif/gfkJT/">checkout the sample on JSFiddle</a></iframe>

<p>For the cell colors in the value of the binding is used as an input into the specified color model. In this case this is a color model that returns a color interpolated between the red and green colors with a mean neutral value. One can specify his one color model like a similar one based on average neutral value instead of mean neutral. If no color model is specified at all the color is expected to be found directly in the value of the colorAttr binding as a suitable input for the <code>dojo/Color</code> constructor.</p>

<p>Note also that the <code>groupAttrs</code> property is of type array instead of just a single attribute. This allows one to specify several attributes for grouping thus creating a multi-level hierarchy. As for example:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">groupsAttrs</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;continent&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">]</span>
</code></pre></div>
<p>Other binding attributes are available:</p>

<ul>
<li>the <code>labelAttr</code> that binds the cell labels to a data attribute.</li>
<li>the <code>tooltipAttr</code> that binds the cell tooltips to a data attribute.</li>
</ul>

<p><a name="byfunc"></a></p>

<h4>Mapping using functions</h4>

<p>In this example the data are mapped from the data store using custom functions. That means the cell size and color as well as the grouping are computed by functions specified by the application.</p>

<p>TODO other JSFiddle example</p>

<p>The example is very similar to the previous one, except that it is using a function to compute the input value for the cells color. In this case instead of using the absolute profit figure we are computing the profit percentage.</p>

<p>The example is also leveraging the query attribute that allows to reduce the scope of the query made onto the data store in order to extract a subset of the data. Here we are choosing only data items with sales above a given threshold.</p>

<p>Obviously functions are also supported for binding areas, labels or tooltips.</p>

<h3>Properties</h3>

<p>In addition to the mapping properties <code>dtreemap/TreeMap</code> provides other useful properties to configure the treemap.</p>

<ul>
<li>The <code>labelThreshold</code> property corresponds to the maximum depth level at which labels will be displayed. If you want no labels to be displayed, choose 0, if you want only top level labels choose 1 and so on.</li>
<li>The <code>selectionMode</code> property corresponds to the type of selection you want to enable on the treemap, possible values are <code>&quot;multiple&quot;</code>, <code>&quot;single&quot;</code> or <code>&quot;none&quot;</code>. See <code>delite/Selection</code> for details.</li>
<li>The <code>selectedItems</code> property is the array of selected items. If you want to select only a single item you can alternatively used selectedItem property. See <code>delite/Selection</code> for details.</li>
</ul>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">treeMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TreeMap</span><span class="p">({</span><span class="nx">store</span><span class="o">:</span> <span class="nx">dataStore</span><span class="p">,</span> <span class="nx">labelThreshold</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">selectedItem</span><span class="o">:</span> <span class="nx">dataStore</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;France&quot;</span><span class="p">)</span> <span class="p">,</span>
  <span class="nx">areaAttr</span><span class="o">:</span> <span class="s2">&quot;sales&quot;</span><span class="p">,</span> <span class="nx">colorAttr</span><span class="o">:</span> <span class="s2">&quot;profit&quot;</span><span class="p">,</span> <span class="nx">groupAttrs</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">],</span>
  <span class="nx">colorModel</span><span class="o">:</span> <span class="nx">colorModel</span> <span class="p">});</span>
</code></pre></div>
<p>For an exhaustive list of treemap properties see TODO LINK TO API DOC</p>

<p><a name="styling"></a></p>

<h2>Element Styling</h2>

<p><code>dtreemap/TreeMap</code> generates HTML markup that can be styled using CSS. The treemap provides a default TreeMap.css that must be included in your application. Alternate rendering can be achieved by overriding some of the CSS rules and using the classes put by the treemap on the HTML elements.</p>

<p>The following example shows how to:
  * center the labels
  * change the font size
  * use rounded corners on treemap cells (HTML5 browsers only)</p>

<p>TODO JSFiddle example</p>

<p>Here is an exhaustive list of CSS classes that can be used to style the treemap:</p>

<table><thead>
<tr>
<th>class name</th>
<th>applies to</th>
</tr>
</thead><tbody>
<tr>
<td>d-treemap</td>
<td>the treemap widget node</td>
</tr>
<tr>
<td>d-treemap-leaf</td>
<td>a treemap cell leaf node</td>
</tr>
<tr>
<td>d-treemap-group</td>
<td>a grouping cell top level node</td>
</tr>
<tr>
<td>d-treemap-header</td>
<td>a grouping cell header node</td>
</tr>
<tr>
<td>d-treemap-groupcontent</td>
<td>a grouping cell content node</td>
</tr>
<tr>
<td>d-selected</td>
<td>added to any selected cell node</td>
</tr>
<tr>
<td>d-treemap-leaf_n</td>
<td>a treemap cell leaf node displayed at n-th depth level</td>
</tr>
<tr>
<td>d-treemap-header_n</td>
<td>a grouping cell header node displayed at n-th depth level</td>
</tr>
<tr>
<td>d-treemap-groupcontent_n</td>
<td>a grouping cell content node displayed at n-th level</td>
</tr>
</tbody></table>

<p>Standard CSS pseudo classes like <code>:hover</code> can also be used to customize the cell rendering under particular conditions.</p>

<p><a name="interactions"></a></p>

<h2>User Interactions</h2>

<p>By default the <code>dtreemap/TreeMap</code> widget only provide mouse &amp; touch (pointer) selection interaction. In this default configuration the following selection actions are available:</p>

<table><thead>
<tr>
<th>Function</th>
<th>Action</th>
</tr>
</thead><tbody>
<tr>
<td>Select</td>
<td>Click a cell in the treemap</td>
</tr>
<tr>
<td>Extend a selection</td>
<td>Hold down the CTRL key an click a cell</td>
</tr>
<tr>
<td>Reduce a selection</td>
<td>Hold down the CTRL key and click an already selected cell</td>
</tr>
</tbody></table>

<p>Other interactions must be explicitly mixed in the treemap in order to be available.</p>

<p>To get drill down ability on double click or double tap include the <code>dtreemap/DrillDown</code> mixin:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">DrillDownTreeMap</span> <span class="o">=</span> <span class="nx">register</span><span class="p">(</span><span class="s2">&quot;drilldown-treemap&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">TreeMap</span><span class="p">,</span> <span class="nx">DrillDownUp</span><span class="p">]);</span>
</code></pre></div>
<p>You can then easily use programmatically the <code>DrillDownTreeMap</code> class or declaratively the <code>drilldown-treemap</code> tag provided that you have done the registration before use. </p>

<p>This will enable the following interactions:</p>

<table><thead>
<tr>
<th>Function</th>
<th>Action</th>
</tr>
</thead><tbody>
<tr>
<td>Drill Down</td>
<td>Double click a cell in the treemap</td>
</tr>
<tr>
<td>Drill Up</td>
<td>Double click the top level header in the treemap</td>
</tr>
</tbody></table>

<p>To get keyboard interaction include the <code>dtreemap/Keyboard</code> mixin:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">KeyboardTreeMap</span> <span class="o">=</span> <span class="nx">register</span><span class="p">(</span><span class="s2">&quot;key-treemap&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">TreeMap</span><span class="p">,</span> <span class="nx">Keyboard</span><span class="p">]);</span>
</code></pre></div>
<p>You can then easily use programmatically the <code>KeyboardTreeMap</code> class or declaratively the <code>key-treemap</code> tag provided that you have done the registration before use. </p>

<p>This will enable the following interactions:</p>

<table><thead>
<tr>
<th>Function</th>
<th>Action</th>
</tr>
</thead><tbody>
<tr>
<td>Right/left arrow keys</td>
<td>Select a neighboring item that shares the same parent item.</td>
</tr>
<tr>
<td>Up/down arrow keys</td>
<td>Move up or down in the hierarchy to select a parent or child item.</td>
</tr>
<tr>
<td>Plus key (+)</td>
<td>Drill down the treemap</td>
</tr>
<tr>
<td>Minus key (-)</td>
<td>Drill up the treemap</td>
</tr>
</tbody></table>

<p><a name="mixins"></a></p>

<h2>Mixins</h2>

<p>By default each treemap cell is drawn with a fixed size label. One can leverage CSS to change the default rendering like changing the font size. However some more complex customization might not be possible with CSS, that&#39;s why the <code>dtreemap/TreeMap</code> widget conveniently proposes classes that can be mixed in the main class and will provide alternate rendering.</p>

<h3>GroupLabel</h3>

<p>The first rendering mixin is the <code>dtreemap/GroupLabel</code> mixin. It allows to remove cell labels and only keep group labels centered on the groups:</p>

<p>TODO JSFillde sample</p>

<h3>ScaledLabel</h3>

<p>The second rendering mixin is the <code>dtreemap/ScaledLabel</code> mixin. It allows to scale the cell labels so that they fill as much as possible the cells size:</p>

<p>TODO JSFiddle sample</p>

<p><a name="events"></a></p>

<h2>Element Events</h2>

<p>The <code>dtreemap/TreeMap</code> provides the following events:</p>

<table><thead>
<tr>
<th>event name</th>
<th>dispatched</th>
<th>cancelable</th>
<th>bubbles</th>
<th>properties</th>
</tr>
</thead><tbody>
<tr>
<td>treemap-renderer-updated</td>
<td>after creation, styling and sizing of each group and leaf renderers</td>
<td>No</td>
<td>No</td>
<td><ul><li><code>render</code>: the updated node</li><li><code>item</code>: the corresponding data item </li><li><code>kind</code>: <code>&quot;leaf&quot;</code>or <code>&quot;group&quot;</code>depending on the renderer type</li><li><code>level</code>: depth level of the renderer</li></ul></td>
</tr>
<tr>
<td>treemap-item-over</td>
<td>when hovering a treemap cell</td>
<td>No</td>
<td>No</td>
<td><ul><li><code>render</code>: the hovered cell</li><li><code>item</code>: the corresponding data item </li><li><code>triggerEvent</code>: the pointer event that triggered the treemap event</li></ul></td>
</tr>
<tr>
<td>treemap-item-out</td>
<td>when rolling out of a treemap cell</td>
<td>No</td>
<td>No</td>
<td><ul><li><code>render</code>: the rolled out cell</li><li><code>item</code>: the corresponding data item </li><li><code>triggerEvent</code>: the pointer event that triggered the treemap event</li></ul></td>
</tr>
</tbody></table>

<p>In addition on can listen on the treemap to the selection events dispatched when a cell is selected. See <code>delite/Selection</code>for details.</p>

<p>This code excerpt shows how to listen to various events and react to them:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">treeMap</span> <span class="o">=</span> <span class="p">...;</span>
<span class="nx">treeMap</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;selection-change&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// display the label of the selected value</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">newValue</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">treeMap</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;treemap-item-over&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// display the label of the hovered value</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">newValue</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><a name="enterprise"></a></p>

<h2>Enterprise Use</h2>

<h3>Accessibility</h3>

<table><thead>
<tr>
<th>type</th>
<th>status</th>
<th>comment</th>
</tr>
</thead><tbody>
<tr>
<td>Keyboard</td>
<td>optional</td>
<td>Accomplished through the <code>dtreemap/Keyboard</code> mixin see <a href="#interactions">User Interactions</a>.</td>
</tr>
<tr>
<td>Visual Formatting</td>
<td>ok, might require customization</td>
<td>Tested for high constrast and browser zoom (200%). In high contrast the color cell information is not conveyed and must be put in the label if important using <code>labelFunc</code> to be conveyed through text.</td>
</tr>
<tr>
<td>Screen Reader</td>
<td>ok</td>
<td>Tested on JAWS 15 and iOS 6 VoiceOver.</td>
</tr>
</tbody></table>

<h3>Globalization</h3>

<p><code>dtreemap/TreeMap</code> does not provide any internationalizable bundle. The only strings displayed by the treemap are coming from the user data through the <code>dojo/store</code>. A possible way to internationalize those user data strings would be either to serve different data based on user locale or serve string keys that will be looked up into interatonalization bundles when consumed. In this case you might use the <a href="#byfunc">mapping by function</a> in order to recover the actual translated string from the string keys as follows:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/i18!myapp/nls/bundle&quot;</span><span class="p">,</span> <span class="err">…</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bundle</span><span class="p">,</span> <span class="err">…</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">myTreeMap</span><span class="p">.</span><span class="nx">labelFunc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">bundle</span><span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">label</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">});</span> 
</code></pre></div>
<p>Right to left orientation is supported by setting the <code>dir</code> attribute to <code>rtl</code>on the treemap element:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">d</span><span class="o">-</span><span class="nx">treemap</span> <span class="nx">style</span><span class="o">=</span><span class="s2">&quot;width:640px;height:640px&quot;</span> <span class="nx">store</span><span class="o">=</span><span class="s2">&quot;dataStore&quot;</span> <span class="nx">areaAttr</span><span class="o">=</span><span class="s2">&quot;sales&quot;</span> <span class="nx">colorAttr</span><span class="o">=</span><span class="s2">&quot;profit&quot;</span> <span class="nx">dir</span><span class="o">=</span><span class="s2">&quot;rtl&quot;</span><span class="o">&gt;&lt;</span><span class="err">/d-treemap&gt;</span>
</code></pre></div>
<h3>Security</h3>

<p>This widget as no specific security concern. Refers to <code>delite/Widget</code> and <code>delite/StoreMap</code> documentation for general security advices on this base class and mixin that <code>dtreemap/TreeMap</code> is using.</p>

<h3>Browser Support</h3>

<p>This widget supports all supported browsers without any degrated behavior.</p>

<h2>See also</h2>

<h3>Samples</h3>

<h3>Blog posts…</h3>

</div>

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/dtreemap/js/bootstrap.min.js"></script>
<script>
	if ($(".doc").length) {
		$(".doc table").addClass("table-striped table-bordered table");
		$(document).scroll(function () {
			$(".navbar").toggleClass("hidden", $(document).scrollTop() > 50);
		});
	}
</script>

</body>
</html>